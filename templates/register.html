<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Global & Body Styles */
        body {
            margin: 0;
            font-family: 'Prompt', sans-serif;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden; 
            background: #121212; /* Deep dark background */
        }

        /* --- Star Particle Background (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Index) --- */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .stars::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            /* ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ box-shadow (‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏°) */
            box-shadow: 
                100px 30px #fff, 200px 70px #fff, 350px 10px #fff, 450px 50px #fff, 600px 80px #fff,
                700px 20px #fff, 850px 60px #fff, 950px 30px #fff, 1100px 90px #fff, 1250px 40px #fff,
                50px 150px #fff, 150px 220px #fff, 300px 180px #fff, 400px 250px #fff, 550px 210px #fff,
                650px 280px #fff, 800px 240px #fff, 900px 310px #fff, 1050px 270px #fff, 1200px 330px #fff,
                120px 450px #fff, 280px 520px #fff, 450px 480px #fff, 620px 550px #fff, 780px 510px #fff,
                950px 580px #fff, 1100px 540px #fff, 1250px 610px #fff, 1400px 570px #fff, 1550px 630px #fff,
                100px 750px #fff, 200px 820px #fff, 350px 780px #fff, 450px 850px #fff, 600px 810px #fff,
                700px 880px #fff, 850px 840px #fff, 950px 910px #fff, 1100px 870px #fff, 1250px 930px #fff;
            
            background: transparent;
            width: 1px;
            height: 1px;
            animation: starTwinkle 15s linear infinite;
        }

        @keyframes starTwinkle {
            0%, 100% { transform: translateY(0); opacity: 1; }
            50% { transform: translateY(-50px); opacity: 0.8; }
        }

        /* Main Card Container - The Split Card */
        .main-card {
            background: #1a1a2e;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 950px; 
            display: flex;
            overflow: hidden;
            min-height: 550px;
            position: relative;
            z-index: 10; 
        }

        h2 {
            font-weight: 700;
            color: #80c0ff;
            margin-bottom: 30px;
            font-size: 24px;
        }
        
        /* --- Left Panel: Input Fields --- */
        .left-panel {
            flex: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: #232340; /* Darker Blue (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Right Panel ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ Index) */
        }
        
        /* Input Field */
        input {
            width: 100%;
            padding: 15px 18px;
            margin-bottom: 25px;
            border: 1px solid #4a4a6e;
            background: #1a1a2e;
            color: #ffffff;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        input::placeholder {
            color: #999999;
        }
        input:focus {
            border-color: #ff7f50; /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ Coral Orange ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô Input */
            outline: none;
        }

        /* --- Right Panel: Camera & Actions --- */
        .right-panel {
            flex: 1.2;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #1a1a2e; /* Card color */
        }
        
        /* Instruction & Status */
        #instruction {
            font-size: 18px;
            color: #80c0ff;
            font-weight: 600;
            margin-top: 10px;
            text-align: center;
        }

        #status {
            color: #999999;
            font-size: 14px;
            margin-bottom: 15px;
            font-weight: 500;
            text-align: center;
        }

        /* Video Area */
        .video-box {
            width: 100%;
            max-width: 350px;
            aspect-ratio: 4/3; 
            background-color: #2c3e50; 
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            border: 3px solid #ff7f50; /* Orange/Coral accent */
        }
        
        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1); 
            display: block;
        }

        /* Buttons */
        button {
            width: 100%;
            padding: 15px;
            margin-top: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-capture {
            background: #ff7f50; /* Coral Orange for Capture */
            color: #1a1a2e; 
            box-shadow: 0 4px 10px rgba(255, 127, 80, 0.3);
        }
        .btn-capture:hover:not(:disabled) { background: #ff6347; }
        .btn-capture:disabled { background: #4a4a6e; color: #999999; cursor: not-allowed; }

        .btn-main {
            background: #2ecc71; /* Green for Submit/Success */
            color: #1a1a2e;
            width: 100%;
            font-size: 18px;
            margin-top: 20px;
            box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3);
        }
        .btn-main:hover:not(:disabled) { background: #27ae60; }
        .btn-main:disabled {
            background: #4a4a6e;
            color: #999999;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Loader & Result */
        #loader {
            display: none;
            color: #ff7f50;
            font-weight: 600;
            margin-top: 20px;
            font-size: 16px;
            padding: 15px;
            border: 1px dashed #ff7f50;
            border-radius: 8px;
            text-align: center;
        }

        #register-result {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #232340;
            border: 2px solid #2ecc71;
            border-radius: 10px;
        }
        #register-result h3 { color: #2ecc71; }
        
        .back-link {
            display: block;
            margin-top: 25px;
            color: #999999;
            text-decoration: none;
            font-size: 14px;
            text-align: center;
        }
        .back-link:hover {
            color: #80c0ff;
        }


        /* --- Responsive Adjustments --- */
        @media (max-width: 800px) {
            .main-card {
                flex-direction: column; 
                min-height: auto;
                width: 95%;
            }
            .left-panel {
                padding: 30px;
                order: 1; /* Form on top */
            }
            .right-panel {
                padding: 30px;
                order: 2; /* Camera/Action below */
            }
            .video-box {
                max-width: 100%;
            }
            .right-panel h2 {
                text-align: center;
            }
        }
    </style>
</head>

<body>
    
    <div class="stars"></div>

    <div class="main-card">
        <form style="display: contents;">
            <div class="left-panel">
                <h2>üìù ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h2>
                <input type="text" id="name" name="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" required>
                <input type="text" id="surname" name="surname" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" required>
                <input type="text" id="studentid" name="studentid" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡πÉ‡∏ä‡πâ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô)" required> 
                
                <p style="font-size: 14px; color: #999999; margin-top: 30px;">
                    ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤
                </p>
                
                <a href="/" class="back-link">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
            </div>
            
            <div class="right-panel">
                <h2>üì∏ ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (8 ‡∏ó‡πà‡∏≤)</h2>
                
                <p id="instruction">üëâ ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏£‡∏á</p>

                <div class="video-box">
                    <video id="video" autoplay playsinline></video>
                </div>
                
                <p id="status">‡∏ñ‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (0/8) ‡∏†‡∏≤‡∏û</p>
                
                <button type="button" class="btn-capture" onclick="capture()">
                    üì∏ ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏ó‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                </button>
                
                <button type="button" class="btn-main" disabled id="submitBtn" onclick="submitData()">
                    ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
                </button>
                
                <div id="loader">
                    ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏£‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•...<br>
                    <span style="font-size:12px; font-weight:400;">(‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà)</span>
                </div>

                <div id="register-result">
                    <h3 style="margin-top:0;">üéâ ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
                    <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß:</p>
                    <img id="detected-face-img" src="" alt="Detected Face" style="width: 150px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                    <p style="color: #999999; font-size: 14px; margin-top:10px;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏≥‡∏ó‡πà‡∏≤‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ...</p>
                </div>
            </div>
        </form>
    </div>

    <script>
        const video = document.getElementById('video');
        const status = document.getElementById('status');
        const instruction = document.getElementById('instruction');
        const submitBtn = document.getElementById('submitBtn');
        const loader = document.getElementById('loader');
        const resultDiv = document.getElementById('register-result');
        const resultImg = document.getElementById('detected-face-img');
        const captureButton = document.querySelector('.btn-capture');
        
        let images = [];
        const TOTAL_IMAGES = 8;
        
        // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á (8 ‡∏ó‡πà‡∏≤)
        const instructionsList = [
            "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏£‡∏á", "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 2: ‡∏´‡∏±‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢", "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 3: ‡∏´‡∏±‡∏ô‡∏Ç‡∏ß‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢", 
            "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 4: ‡∏Å‡πâ‡∏°‡∏´‡∏ô‡πâ‡∏≤", "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 5: ‡πÄ‡∏á‡∏¢‡∏´‡∏ô‡πâ‡∏≤", "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 6: ‡∏¢‡∏¥‡πâ‡∏°", 
            "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 7: ‡∏´‡∏•‡∏±‡∏ö‡∏ï‡∏≤", "‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà 8: ‡∏ï‡∏≤‡πÇ‡∏ï",
        ];
        
        const nameInput = document.getElementById('name');
        const surnameInput = document.getElementById('surname');
        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÉ‡∏ä‡πâ studentidInput ‡πÅ‡∏ó‡∏ô studentCodeInput
        const studentidInput = document.getElementById('studentid'); 

        // ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(s => video.srcObject = s)
            .catch(err => instruction.innerText = "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ: ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏Ñ‡∏°");

        window.capture = function() {
            if (images.length >= TOTAL_IMAGES) return;

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö studentid ‡πÅ‡∏ó‡∏ô studentCode
            if (!nameInput.value || !surnameInput.value || !studentidInput.value) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û!");
                return;
            }
            
            captureButton.disabled = true;

            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth; 
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
            
            canvas.toBlob(blob => {
                images.push(blob);
                status.innerText = `‡∏ñ‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (${images.length}/${TOTAL_IMAGES}) ‡∏†‡∏≤‡∏û`;
                
                if (images.length < TOTAL_IMAGES) {
                    instruction.innerText = instructionsList[images.length];
                    instruction.style.color = "#80c0ff"; 
                    captureButton.disabled = false;
                } else {
                    instruction.innerText = "üéâ ‡∏ñ‡πà‡∏≤‡∏¢‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô";
                    instruction.style.color = "#2ecc71"; // Green for completion
                    status.style.color = "#2ecc71";
                    captureButton.style.display = 'none'; 
                    submitBtn.disabled = false;
                }
            }, 'image/jpeg', 0.8);
        }

        window.submitData = function() {
            const name = nameInput.value;
            const surname = surnameInput.value;
            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÉ‡∏ä‡πâ studentid ‡πÅ‡∏ó‡∏ô studentCode
            const studentid = studentidInput.value; 

            if (images.length < TOTAL_IMAGES) {
                 alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 8 ‡∏ó‡πà‡∏≤");
                 return;
            }

            // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏ä‡∏ß‡πå Loader
            captureButton.style.display = 'none'; 
            submitBtn.style.display = 'none';
            loader.style.display = 'block';

            const formData = new FormData();
            formData.append('name', name);
            formData.append('surname', surname);
            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏™‡πà‡∏á studentid
            formData.append('studentid', studentid);
            images.forEach((img, i) => formData.append('image_' + i, img, `img_${i}.jpg`));

            fetch('/register', { method: 'POST', body: formData })
                .then(res => {
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ HTTP code ‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô JSON
                    if (!res.ok) {
                        return res.json().catch(() => {
                            throw new Error('Server error, status: ' + res.status);
                        });
                    }
                    return res.json();
                })
                .then(data => {
                    loader.style.display = 'none';

                    if (data.status === 'success') {
                        resultDiv.style.display = 'block';
                        
                        if (data.example_image) {
                            // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ (‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏£‡∏≠‡∏ö‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤)
                            resultImg.src = 'data:image/jpeg;base64,' + data.example_image;
                        }

                        setTimeout(() => {
                            window.location.href = data.redirect_url;
                        }, 3000);

                    } else {
                        alert("‚ùå ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + (data.message || "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏"));
                        submitBtn.style.display = 'block'; 
                        // ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° Capture ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏´‡∏≤‡∏Å‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö 8 ‡∏†‡∏≤‡∏û
                        captureButton.style.display = images.length < TOTAL_IMAGES ? 'block' : 'none'; 
                    }
                })
                .catch(err => {
                    loader.style.display = 'none';
                    submitBtn.style.display = 'block';
                    captureButton.style.display = images.length < TOTAL_IMAGES ? 'block' : 'none';
                    alert("üî• ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠: " + err);
                });
        }
    </script>
</body>
</html>